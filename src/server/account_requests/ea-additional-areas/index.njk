{% extends 'layouts/page.njk' %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% block pageTitle %}{{ t('account-request.eaAdditionalAreas.heading') }} | {{ serviceName }}{% endblock %}

{% block content %}
  <a href="#" class="govuk-back-link">{{ t('account-request.back') }}</a>

  <h1 class="govuk-heading-l">{{ t('account-request.eaAdditionalAreas.heading') }}</h1>

  <form method="post" novalidate>
    {% if returnTo %}
    <input type="hidden" name="returnTo" value="{{ returnTo }}">
    {% endif %}

    {% set checkboxItems = [] %}
    {% if additionalEaAreas and additionalEaAreas.length > 0 %}
      {% for area in additionalEaAreas %}
        {% set checkboxItems = checkboxItems.concat([{
          value: area.id | string,
          text: area.name,
          checked: area.id | string in (values.additionalEaAreas or [])
        }]) %}
      {% endfor %}
    {% endif %}

    {{ govukCheckboxes({
      name: "additionalEaAreas",
      fieldset: {
        legend: {
          text: t('account-request.eaAdditionalAreas.introText'),
          classes: "govuk-fieldset__legend--l",
          isPageHeading: false
        }
      },
      items: checkboxItems
    }) }}

    {% if not additionalEaAreas or additionalEaAreas.length == 0 %}
      <p class="govuk-body">{{ t('account-request.eaAdditionalAreas.noAdditionalAreas') }}</p>
    {% endif %}

    {{ govukButton({
      text: t('account-request.eaAdditionalAreas.continueButton')
    }) }}
  </form>
{% endblock %}
